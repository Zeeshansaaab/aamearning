{"version":3,"file":"dropdown.es.js","sources":["../src/ShaplaDropdownMenu.vue","../src/ShaplaDropdown.vue"],"sourcesContent":["<template>\n  <div class=\"shapla-dropdown-menu\" :class=\"containerClass\" :style=\"containerStyle\" :role=\"role\" ref=\"root\">\n    <div class=\"shapla-dropdown-menu__inner\">\n      <slot name=\"before-content\" :direction=\"autoClass\"/>\n      <div class=\"shapla-dropdown-menu__content\">\n        <slot/>\n      </div>\n      <slot name=\"after-content\" :direction=\"autoClass\"/>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {reactive, toRefs, onMounted, watch, ref, computed} from 'vue';\n\nexport default {\n  name: \"ShaplaDropdownMenu\",\n  props: {\n    active: {type: Boolean, default: false},\n    role: {type: String, default: 'menu'},\n    right: {type: Boolean, default: false},\n    up: {type: Boolean, default: false},\n    maxItems: {type: Number},\n    direction: {\n      type: String, default: 'auto',\n      validator: value => ['auto', 'up', 'down'].indexOf(value) !== -1\n    },\n  },\n  setup(props) {\n    const root = ref(null);\n    const state = reactive({autoClass: '', isActive: false});\n    const containerClass = computed(() => {\n      let classes = [];\n      if (state.isActive) classes.push('is-active');\n      if (state.autoClass) classes.push(state.autoClass);\n      if (props.right) classes.push('is-right');\n      if (props.up || props.direction === 'up') classes.push('is-up');\n      if (props.maxItems) classes.push('has-max-items');\n      return classes;\n    })\n    const containerStyle = computed(() => {\n      let styles = [];\n      if (props.maxItems) {\n        styles.push({'--max-menu-items': props.maxItems})\n      }\n      return styles;\n    })\n\n    const calculateDirection = () => {\n      let el = root.value,\n        browserHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight,\n        elParent = el.parentNode,\n        rect = elParent.getBoundingClientRect(),\n        win = elParent.ownerDocument.defaultView,\n        elFromTop = parseInt(rect.top + win.pageYOffset),\n        spaceToBottom = browserHeight - elFromTop,\n        elHeight = el.scrollHeight;\n\n      if ((elHeight + 15) < spaceToBottom) {\n        state.autoClass = 'is-down'\n      } else {\n        state.autoClass = 'is-up'\n      }\n    }\n\n    watch(() => props.active, isActive => {\n      state.isActive = isActive;\n      if (isActive && props.direction === 'auto' && !props.up) {\n        calculateDirection();\n      }\n    })\n\n    onMounted(() => {\n      state.isActive = props.active;\n    })\n\n    return {...toRefs(state), root, containerClass, containerStyle}\n  }\n}\n</script>\n\n<style lang=\"scss\">\n@import \"index\";\n</style>\n","<template>\n  <div class=\"shapla-dropdown\" :class=\"{'is-hoverable':hoverable}\" ref=\"root\">\n    <div class=\"shapla-dropdown-trigger\" aria-haspopup=\"true\" :aria-expanded=\"isActive?'true':'false'\"\n         @click=\"isActive = !isActive\">\n      <slot name=\"trigger\"/>\n    </div>\n    <shapla-dropdown-menu :active=\"isActive\" :role=\"role\" :right=\"right\" :up=\"up\" :direction=\"direction\"\n                          :max-items=\"maxItems\">\n      <template v-slot:before-content>\n        <slot name=\"before-content\"/>\n      </template>\n      <slot></slot>\n      <template v-slot:after-content>\n        <slot name=\"after-content\"/>\n      </template>\n    </shapla-dropdown-menu>\n  </div>\n</template>\n\n<script>\nimport ShaplaDropdownMenu from \"./ShaplaDropdownMenu.vue\";\nimport {watch, reactive, ref, toRefs} from 'vue';\n\nexport default {\n  name: \"ShaplaDropdown\",\n  components: {ShaplaDropdownMenu},\n  props: {\n    hoverable: {type: Boolean, default: true},\n    role: {type: String, default: 'menu'},\n    right: {type: Boolean, default: false},\n    up: {type: Boolean, default: false},\n    maxItems: {type: Number},\n    direction: {\n      type: String, default: 'auto',\n      validator: value => ['auto', 'up', 'down'].indexOf(value) !== -1\n    },\n  },\n  setup() {\n    const root = ref(null);\n    const state = reactive({isActive: false});\n\n    watch(() => state.isActive, isActive => {\n      if (isActive) {\n        document.addEventListener('click', event => {\n          if (!root.value.contains(event.target)) {\n            state.isActive = false;\n          }\n        });\n      }\n    })\n\n    return {...toRefs(state), root}\n  }\n}\n</script>\n\n<style lang=\"scss\">\n\n</style>\n"],"names":["name","props","active","type","Boolean","default","role","String","right","up","maxItems","Number","direction","validator","indexOf","value","setup","root","ref","state","reactive","autoClass","isActive","containerClass","computed","classes","push","containerStyle","styles","el","browserHeight","window","innerHeight","document","documentElement","clientHeight","body","elParent","parentNode","rect","getBoundingClientRect","win","ownerDocument","defaultView","spaceToBottom","parseInt","top","pageYOffset","elHeight","scrollHeight","__spreadProps","toRefs","class","style","_renderSlot","components","ShaplaDropdownMenu","hoverable","addEventListener","contains","event","target","$props"],"mappings":"oqBAeK,SACHA,KAAM,qBACNC,MAAO,CACLC,OAAQ,CAACC,KAAMC,QAASC,SAAS,GACjCC,KAAM,CAACH,KAAMI,OAAQF,QAAS,QAC9BG,MAAO,CAACL,KAAMC,QAASC,SAAS,GAChCI,GAAI,CAACN,KAAMC,QAASC,SAAS,GAC7BK,SAAU,CAACP,KAAMQ,QACjBC,UAAW,CACTT,KAAMI,OAAQF,QAAS,OACvBQ,kBAAoB,CAAC,OAAQ,KAAM,QAAQC,QAAQC,KAGvDC,MAAMf,SACEgB,EAAOC,EAAI,MACXC,EAAQC,EAAS,CAACC,UAAW,GAAIC,UAAU,IAC3CC,EAAiBC,GAAS,SAC1BC,EAAU,UACVN,EAAMG,YAAkBI,KAAK,aAC7BP,EAAME,aAAmBK,KAAKP,EAAME,WACpCpB,EAAMO,SAAekB,KAAK,aAC1BzB,EAAMQ,IAA0B,OAApBR,EAAMW,cAA4Bc,KAAK,SACnDzB,EAAMS,YAAkBgB,KAAK,iBAC1BD,KAEHE,EAAiBH,GAAS,SAC1BI,EAAS,UACT3B,EAAMS,YACDgB,KAAK,CAAC,mBAAoBzB,EAAMS,WAElCkB,eAoBH,IAAM3B,EAAMC,eACVoB,SAAWA,EACbA,GAAgC,SAApBrB,EAAMW,YAAyBX,EAAMQ,IAnB5B,UACrBoB,EAAKZ,EAAKF,MACZe,EAAgBC,OAAOC,aAAeC,SAASC,gBAAgBC,cAAgBF,SAASG,KAAKD,aAC7FE,EAAWR,EAAGS,WACdC,EAAOF,EAASG,wBAChBC,EAAMJ,EAASK,cAAcC,YAE7BC,EAAgBd,EADJe,SAASN,EAAKO,IAAML,EAAIM,aAEpCC,EAAWnB,EAAGoB,eAGR5B,UADH2B,EAAW,GAAMJ,EACF,UAEA,kBAWZ,OACFtB,SAAWrB,EAAMC,UAGlBgD,OAAIC,EAAOhC,IAAX,CAAmBF,KAAAA,EAAMM,eAAAA,EAAgBI,eAAAA,oBAxEzCyB,MAAM,4HAH4CA,QAAO,2CAAiBC,0BAAY/C,oCAG3FgD,sJCmBD,SACHtD,KAAM,iBACNuD,WAAY,oBAACC,GACbvD,MAAO,CACLwD,UAAW,CAACtD,KAAMC,QAASC,SAAS,GACpCC,KAAM,CAACH,KAAMI,OAAQF,QAAS,QAC9BG,MAAO,CAACL,KAAMC,QAASC,SAAS,GAChCI,GAAI,CAACN,KAAMC,QAASC,SAAS,GAC7BK,SAAU,CAACP,KAAMQ,QACjBC,UAAW,CACTT,KAAMI,OAAQF,QAAS,OACvBQ,kBAAoB,CAAC,OAAQ,KAAM,QAAQC,QAAQC,KAGvDC,cACQC,EAAOC,EAAI,MACXC,EAAQC,EAAS,CAACE,UAAU,cAE5B,IAAMH,EAAMG,eACZA,YACOoC,iBAAiB,aACnBzC,EAAKF,MAAM4C,SAASC,EAAMC,YACvBvC,UAAW,SAMlB4B,OAAIC,EAAOhC,IAAX,CAAmBF,KAAAA,+GAlDqCmC,gFAC1BA,gCAAsB,gBAAe,OACpE,4HAGoClD,kBAAaI,YAAeE,cAASC,KAAWA,GACnEG,UAASkD;;;;;;"}